import { useState } from "react";
import Donut from "./Donut";
import Loader from "./Loader";

const Live = () => {
  const [resultDiv, setResultDiv] = useState("");
  const main = async () => {
    const box = document.querySelector(".live-input");
    box.style.display = "none";
    const load = document.querySelector(".loader");
    load.style.display = "block";
    setResultDiv("");
    let data;
    try {
    const result = await window.api.capturecap();
    data = [
      {
        title: "Benign",
        value: result.benign,
      },
      {
        title: "Malicious",
        value: result.malicious,
      },
    ];
  } catch (error) {
    setResultDiv(error)
  }
    load.style.display = "none";
    setResultDiv(<Donut data={data} detail="Flows Count"/>);
  };
  return (
    <div className="live">
      <h2>Live Analysis</h2>
      <div className="live-input">
        <h3>Click Here for live analysis</h3>
        <button className="ui-btn complete-button" onClick={main}>
          <span>Live</span>
        </button>
      </div>
      <Loader />
      <div className="result">{resultDiv}</div>
    </div>
  );
};

export default Live;
